(function(c,e){typeof exports=="object"&&typeof module<"u"?e(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],e):(c=typeof globalThis<"u"?globalThis:c||self,e(c.CrucibleSearchPlugin={},c.Vue))})(this,function(c,e){"use strict";function p(){const t=e.inject("$router");if(!t)throw new Error("Router instance is not provided");return t}const _={class:"search-container"},f=e.createElementVNode("h1",null,"Crucible Resource Search",-1),m={class:"search-box"},g=e.createElementVNode("p",null,"Tags Input",-1),h=e.defineComponent({__name:"CrucibleSearch",setup(t){const o=p(),n=r=>{o.push({path:`/search-in-tag/${r||"1"}`})},l=r=>{r||o.back()};return(r,s)=>(e.openBlock(),e.createElementBlock("div",_,[f,e.createElementVNode("div",m,[g,e.createElementVNode("input",{type:"text",placeholder:"Enter a Tag (try ditto)",onKeyup:s[0]||(s[0]=e.withKeys(a=>n(a.target.value),["enter"])),onInput:s[1]||(s[1]=a=>l(a.target.value))},null,32)])]))}}),k=async t=>{try{const o=await fetch(`https://pokeapi.co/api/v2/pokemon/${t.toString()}`);if(!o.ok)throw new Error(`HTTP error! status: ${o.status}`);return[(await o.json()).name]}catch(o){return console.log(o),[]}},y=t=>(e.pushScopeId("data-v-cb55be66"),t=t(),e.popScopeId(),t),S={class:"search-results-container"},E=y(()=>e.createElementVNode("h2",null,"Search Results",-1)),b={key:0,class:"results"},R={key:1,class:"no-results"},d=((t,o)=>{const n=t.__vccOpts||t;for(const[l,r]of o)n[l]=r;return n})(e.defineComponent({__name:"DisplayResult",setup(t){const o=e.ref([]),n=p(),l=e.ref("");e.onMounted(()=>{n?(l.value=n.currentRoute.value.params.tag,r(l.value)):l.value="undefined"});const r=async s=>{if(console.log("Fetching data for tag:",s),s){const a=await k(s);o.value=a,console.log("Search results:",a)}else console.log("no tag provided"),o.value=[]};return e.watch(n.currentRoute,(s,a)=>{const i=s.params.tag||"",u=a.params.tag||"";console.log("tag changed",i,u),i!==u&&r(i)}),(s,a)=>(e.openBlock(),e.createElementBlock("div",S,[E,o.value.length?(e.openBlock(),e.createElementBlock("div",b,[e.createElementVNode("ul",null,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(o.value,(i,u)=>(e.openBlock(),e.createElementBlock("li",{key:u},e.toDisplayString(i),1))),128))])])):(e.openBlock(),e.createElementBlock("p",R,"No results found"))]))}}),[["__scopeId","data-v-cb55be66"]]);function w(t,o){const{router:n}=o;t.component("CrucibleSearch",h),t.component("DisplayResult",d),t.provide("$router",n),n.addRoute({path:"/search-in-tag/:tag",component:d})}c.CrucibleSearch=h,c.DisplayResult=d,c.createSearchPlugin=w,Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})});
