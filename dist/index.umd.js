(function(s,e){typeof exports=="object"&&typeof module<"u"?e(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],e):(s=typeof globalThis<"u"?globalThis:s||self,e(s.CrucibleSearchPlugin={},s.Vue))})(this,function(s,e){"use strict";function h(){const t=e.inject("$router");if(!t)throw new Error("Router instance is not provided");return t}const m=t=>(e.pushScopeId("data-v-e50a478b"),t=t(),e.popScopeId(),t),g={id:"root",class:"search-container"},k={class:"search-box"},y=m(()=>e.createElementVNode("label",{for:""},null,-1)),S=e.defineComponent({__name:"CrucibleSearch",setup(t){const o=h(),c=n=>{o.push({path:`/search-in-tag/${n||"1"}`})};return(n,r)=>(e.openBlock(),e.createElementBlock("div",g,[e.createElementVNode("div",k,[e.createElementVNode("button",{onClick:r[0]||(r[0]=()=>n.$router.back())},"back â†µ"),y,e.createElementVNode("input",{type:"text",placeholder:"Enter a valid Tag (try ditto)",onKeyup:r[1]||(r[1]=e.withKeys(l=>c(l.target.value),["enter"]))},null,32)])]))}}),f=(t,o)=>{const c=t.__vccOpts||t;for(const[n,r]of o)c[n]=r;return c},_=f(S,[["__scopeId","data-v-e50a478b"]]),b=async t=>{try{const o=await fetch(`https://pokeapi.co/api/v2/pokemon/${t.toString()}`);if(!o.ok)throw new Error(`HTTP error! status: ${o.status}`);return[(await o.json()).name]}catch(o){return console.log(o),[]}},E=t=>(e.pushScopeId("data-v-357fbfcc"),t=t(),e.popScopeId(),t),w={class:"search-results-container"},$=E(()=>e.createElementVNode("h2",null,"Search Results",-1)),B={key:0,class:"results"},R={key:1,class:"no-results"},p=f(e.defineComponent({__name:"DisplayResult",setup(t){const o=e.ref([]),c=e.inject("$getApi")||"undefined",n=h(),r=e.ref("");e.onMounted(()=>{console.log("getApiFromHost",c),n?(r.value=n.currentRoute.value.params.tag,l(r.value)):r.value="undefined"});const l=async a=>{if(a){const i=await b(a);o.value=i}else o.value=[]};return e.watch(n.currentRoute,(a,i)=>{const d=a.params.tag||"",u=i.params.tag||"";d!==u&&l(d)}),(a,i)=>(e.openBlock(),e.createElementBlock("div",w,[$,o.value.length?(e.openBlock(),e.createElementBlock("div",B,[e.createElementVNode("ul",null,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(o.value,(d,u)=>(e.openBlock(),e.createElementBlock("li",{key:u},e.toDisplayString(d),1))),128))])])):(e.openBlock(),e.createElementBlock("p",R,"No results found"))]))}}),[["__scopeId","data-v-357fbfcc"]]);function C(t,o){const{router:c,getApi:n}=o;t.component("CrucibleSearch",_),t.component("DisplayResult",p),t.provide("$router",c),t.provide("$getApi",n),c.addRoute({path:"/search-in-tag/:tag",component:p})}s.CrucibleSearch=_,s.DisplayResult=p,s.createSearchPlugin=C,Object.defineProperty(s,Symbol.toStringTag,{value:"Module"})});
